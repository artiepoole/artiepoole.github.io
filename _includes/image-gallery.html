<style>
  .image-gallery {overflow: auto; margin-left: -1%;}
  .image-gallery a { display: block; margin: 0 0 1% 1%; width: 100%;}
  .image-gallery a img {width: 100%;}
  .image-gallery caption {text-align:center; margin: 0 0 1% 1%; width: 17%;}
</style>

<div class="image-gallery">
{% for file in site.static_files %}
  {% if file.path contains include.folder %}
    {% if file.extname == '.jpg' or 
      file.extname == '.jpeg' or 
      file.extname == '.JPG' or 
      file.extname == '.JPEG' %}
      {% assign basename = file.basename | slice: 5, 40 %}
      <div class="span300">
      <a href="{{ file.path }}">
        <img src="//images.weserv.nl/?url=stupoole.github.io{{ file.path }}&w=300&h=300&output=jpg&q=50&t=square" />
      </a>
      <caption>{{basename}}</caption>
  </div>
    {% endif %}
  {% endif %}
{% endfor %}
</div>